<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="common/common_css :: common_css"></div>
    <link rel="stylesheet" th:href="@{/bootstrap/css/toastr.css}" href="/static/bootstrap/css/toastr.css">
</head>

<body>
<div th:replace="pages/head :: head"></div>
<section id="main-content">
    <section class="wrapper">
        <!--page start-->
        <div id="bill_list" class="row">
            <div class="col-lg-12">
                <div class="panel">
                    <!--头部 位置显示栏-->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">总数：<span id="total"></span></button>
                        <h4 class="modal-title">豆果分词页面</h4>
                    </div>
                    <!--头部 位置显示栏结束-->
                    <div class="row">
                        <div class="col-md-4 col-sm-12 col-xs-12 text-left">
                            <label>类型选择:</label>
                            <label class="select-inline">
                                <select class="form-control" id="type">
                                    <option value="all">全部</option>
                                    <option value="cook">菜谱</option>
                                    <option value="food">食材</option>
                                    <option value="tag">标签</option>
                                    <option value="other">其他</option>
                                </select>
                            </label>
                        </div>
                    </div>
                    <div class="row" style="height: 50px">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-center">
                            <h2></h2>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-center">
                            <a id="link"><span id="term" style="font-size: 100px">豆果分词</span></a>
                            <span hidden id="id"></span>
                        </div>
                    </div>
                    <div class="row" style="height: 200px">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-center">
                            <h2></h2>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="panel panel-primary text-center no-boder bg-color-green green">
                                <div class="panel-center pull-center">
                                    <img onclick="change(this)" alt="" th:value="1" th:src="@{/bootstrap/img/b.png}"
                                         width="200" height="200"
                                         src="/static/bootstrap/img/b.png" style="cursor:pointer"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="panel panel-primary text-center no-boder bg-color-blue">
                                <div class="panel-center  pull-center">
                                    <img alt="" onclick="change(this)" th:value="-2" th:src="@{/bootstrap/img/a.png}"
                                         width="200" height="200"
                                         src="/static/bootstrap/img/a.png" style="cursor:pointer"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="panel panel-primary text-center no-boder bg-color-red">
                                <div class="panel-center pull-center">
                                    <img alt="" onclick="change(this)" th:value="-1" th:src="@{/bootstrap/img/a.png}"
                                         width="200" height="200"
                                         src="/static/bootstrap/img/a.png" style="cursor:pointer"/>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="height: 350px">
                            <div class="col-md-12 col-sm-12 col-xs-12 text-center">
                                <h2></h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- page end-->
    </section>
</section>


<!--引入js 文件-->
<div th:replace="common/common_js :: common_js"></div>
<script th:src="@{/bootstrap/js/toastr.min.js}" src="/static/bootstrap/js/toastr.min.js"></script>
<script>
    window.onload = function () {
        query();
    };

    $("#type").change(function () {
        query();
    });
    
    function query() {
        var type = $("#type").val();
        $.get("/douguoExt/query", {type: type}, function (msg) {
            if (msg.status == 0) {
                toastr.success(msg.message);
                $("#id").html("-1");
                $("#total").html(0)
            }else {
                $("#term").html(msg.keyword);
                $("#id").html(msg.id);
                $("#total").html(msg.total);
                var herf="https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=0&rsv_idx=1&tn=baidu&wd="+msg.keyword;
                $("#link").attr('href',herf)
            }
        });
    }
    
    function change(obj) {
        var flag = $(obj).attr("value");
        var id = $("#id").html();
        var type = $("#type").val();
        if (id == -1) {
            toastr.success("已经没有可为你展示的数据了哟");
            return;
        }
        $.get("/douguoExt/update", {id: id, flag: flag,type:type}, function (msg) {
            if (msg.status == 0) {
                toastr.success(msg.message);
                $("#total").html(0)
                $("#id").html("-1")
            } else {
                $("#term").html(msg.keyword);
                $("#id").html(msg.id);
                $("#total").html(msg.total);
                var herf="https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=0&rsv_idx=1&tn=baidu&wd="+msg.keyword;
                $("#link").attr('href',herf)
            }
        });
    }


</script>


</body>
</html>
